<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>凉葱落</title>
  <meta name="author" content="凉葱落" />
  <link rel="stylesheet" href="/css/pygment.css" type="text/css" />
  <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
  <div class="wrapper">
    <div class="header">
      <p><img src="/images/logo.png"/></p>
      <p></p>
      <h1><a href="/">凉葱落</a></h1>
      <p>学无止境,静水流深.</p>
      <p><a href="/about.html">关于我</a></p>

      <p>
        <a href="mailto:rontomai@gmail.com">rontomai@gmail.com</a><br/>
        <a href="http://github.com/rontom/">github.com/rontom</a><br />
        <a href="http://twitter.com/rontomai/">twitter.com/rontomai</a><br />

      </p>
    </div>
    
    <div class="content">
    <header class="post-header">
  <h1 class="post-title"><a href="/2013/05/10/network-crackr%20.html">Python中sys.argv用法</a></h2>
  <p class="post-meta">
    <i class="fa fa-calendar"></i>
   写作时间：2013年05月10日
  </p>
</header>

<div id="post">
<hr />

<h4 id="section">介绍</h4>

<p>sys.argv变量是一个字符串（包含了命令行参数）列表，即使用命令行传递给你的程序的参数。也包括python脚本名本身。其中sys为python标准模块，直接import sys插入使用，这是sys.argv[]能够使用的条件。argv是argument vector的简写，即参数指针。sys.argv[0]代表代码本身文件路径。sys.argv[1]代表地一个参数，依此类推。</p>

<h4 id="section-1">举例说明</h4>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span><span class="kn">import</span> <span class="nn">sys</span>
    <span class="o">&gt;&gt;&gt;</span><span class="n">python</span> <span class="err">×××</span><span class="o">.</span><span class="n">py</span>  <span class="n">langoft</span><span class="o">.</span><span class="n">com</span> <span class="k">for</span> <span class="n">you</span> <span class="n">to</span> <span class="n">choose</span><span class="o">.</span>  <span class="c">#sys.argv[0] 代表你运行的代码本身，即本例中&#39;×××.py&#39;,而sys.argv[1]为第一个参数即&#39;langoft.com&#39;,sys.argv[2]为&#39;for&#39;。</span>
    <span class="o">&gt;&gt;&gt;</span><span class="kn">import</span> <span class="nn">os</span> <span class="o">,</span><span class="nn">sys</span>
    <span class="o">&gt;&gt;&gt;</span><span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="o">&gt;&gt;&gt;</span><span class="n">python</span> <span class="err">×××</span><span class="o">.</span><span class="n">py</span> <span class="n">vim</span>  <span class="c">#os.system是用来执行命令行的。因此该程序会接受到第一个参数为&#39;vim&#39;，即执行vim,这样你将打开vim编辑界面了。</span></code></pre></div>

<h4 id="section-2">应用实例</h4>
<pre>

<div class="highlight"><pre><code class="language-python" data-lang="python">\<span class="c">#!/usr/bin/env python</span>
\<span class="c"># -*- coding: utf-8 -*-</span>
\<span class="c"># A revised example from A Byte of Python</span>
\<span class="c"># sys-argv1.py</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="k">def</span> <span class="nf">readfile</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>         <span class="c">#从文件中读出文件内容</span>
        <span class="sd">&#39;&#39;&#39;Print a file to the standard output.&#39;&#39;&#39;</span>   
        <span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>	<span class="c">#可使用file()代替</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
                <span class="n">line</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span> <span class="c">#readline()文件内容单行读取，而read(),readlines()是整个文件内容读取</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                        <span class="k">break</span>
                <span class="k">print</span> <span class="n">line</span>     <span class="c">#分别输出每行内容</span>
<span class="sd">&#39;&#39;&#39; 上面一段代码可以更改如下：</span>
<span class="sd">	while True:</span>
<span class="sd">          		for line in  f.readlines():</span>
<span class="sd">	   		if not len(line) or len(line)==0:	#其实not len(line) 和len(line)==0表达的意思差不多</span>
<span class="sd">	  			break</span>
<span class="sd">	 		print line</span>
<span class="sd">&#39;&#39;&#39;</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

\<span class="c"># Script starts from here</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;No action specified.&#39;</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;--&#39;</span><span class="p">):</span> 
        <span class="n">option</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">option</span><span class="o">==</span><span class="s">&#39;version&#39;</span><span class="p">:</span>   <span class="c">#当命令参数为--version，显示版本号</span>
                <span class="k">print</span><span class="s">&#39;Version 1.2&#39;</span>
        <span class="k">elif</span> <span class="n">option</span><span class="o">==</span><span class="s">&#39;help&#39;</span><span class="p">:</span>    <span class="c">#当命令参数为--help时，显示相关帮助内容</span>
                <span class="k">print</span><span class="s">&#39;&#39;&#39;</span>

<span class="s">This program prints files files to the standart output.</span>
<span class="s">Any number of files can be specified.</span>
<span class="s">Options include:</span>
<span class="s">--version:Prints hte version number</span>
<span class="s">--help   :Display the hellp&#39;&#39;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&#39;Unknow option.&#39;</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>   <span class="c">#当参数为文件名时，传入readfile，读出其内容。</span>
                <span class="n">readfile</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></code></pre></div>

</pre>

</div>

<hr/>

<div class="pagination">

	<a class="pagination-item newer" href="/2013/05/09/network-crackr%20.html"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;上一篇<!--Python代码编写出现的错误--></a>


	<a class="pagination-item older" href="/2013/05/11/network-crackr%20.html"><!--在Python中列表、元组、集合、字典的比较-->下一篇&nbsp;&nbsp;<i class="fa fa-arrow-right"></i></a>

</div>

<div class="ds-thread">
</div>

<script type="text/javascript">
	var duoshuoQuery = {short_name:"hacklang"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';
		ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
</script>
<!-- 多说公共JS代码 end -->


<div id="related">
 	<h2>最新文章：</h2>
 	<hr/>
 	<ol class="posts">
	
  		<li>
    		<span class="datetime muted" data-time="2014-07-01 00:00:00 +0800">01 Jul 2014 </span>
    		<a href="/2014/07/01/python-SyntaxError.html">Python代码编写出现的错误</a>
  		</li>
  	
  		<li>
    		<span class="datetime muted" data-time="2014-06-26 00:00:00 +0800">26 Jun 2014 </span>
    		<a href="/2014/06/26/python-argv.html">Python中sys.argv用法</a>
  		</li>
  	
  		<li>
    		<span class="datetime muted" data-time="2013-07-25 00:00:00 +0800">25 Jul 2013 </span>
    		<a href="/2013/07/25/list-element-set-dict.html">在Python中列表、元组、集合、字典的比较</a>
  		</li>
  	
   </ol>
</div>
    </div>
    

    <div class="footer">   
      <div class="rss">
  	   <img src="/images/weixin.png" alt="scan me for you">
      </div>
    </div>
  
  </div>

  <!-- ClickTale Bottom part -->
  <!--div id="ClickTaleDiv" style="display: none;"></div-->
  <!--script type="text/javascript">
  if(document.location.protocol!='https:')
    document.write(unescape("%3Cscript%20src='http://s.clicktale.net/WRb.js'%20type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  if(typeof ClickTale=='function') ClickTale(206,0.3,"www03");
  </script-->
  <!-- ClickTale end of Bottom part -->

  <!-- Google Analytics -->
  <!--script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  var pageTracker = _gat._getTracker("UA-6016902-1");
  pageTracker._trackPageview();
  </script-->
  <!-- Google Analytics end -->

</body>
</html>
